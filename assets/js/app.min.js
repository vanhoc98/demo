(function(e,a){var o={};e.app=e.app||{},e.app.init=function(o){e.app.setOptions(o),a('[data-lightbox="inline"]').magnificPopup({type:"inline",mainClass:"mfp-no-margins mfp-fade",closeBtnInside:!1,fixedContentPos:!0}),a("#youtube").magnificPopup({type:"iframe",removalDelay:300,mainClass:"mfp-fade"}),a(".preview-icon a").magnificPopup({type:"image",removalDelay:300,mainClass:"mfp-fade",gallery:{enabled:!0}})},e.app.setOptions=function(e){o=a.extend(o,e)},e.app.subscribe=function(e){var o="";""===a(e+" #Email").val()&&(o+="Bạn chưa nhập Email"),""===o?a.ajax({type:"POST",url:"/api/comdy/"+a("#token").val()+"/subscribe",data:JSON.stringify({Email:a(e+" #Email").val()}),dataType:"json",contentType:"application/json",success:function(o){if(o.success){new PNotify({text:"Đăng ký nhận tin tức về sự kiện thành công.",type:"success",buttons:{sticker:!1,closer:!1}}),a(e+" #Email").val("");var n=a.magnificPopup.instance;n.close()}else new PNotify({text:o.message,type:"error",buttons:{sticker:!1,closer:!1}})}}):new PNotify({text:o,type:"error",buttons:{sticker:!1,closer:!1}})},e.app.order=function(){var e="";if(""===a("#modal-order #FullName").val()&&(e+="Chưa nhập Họ Tên"),""===a("#modal-order #PhoneNumber").val()&&(e+=""!==e?"<br/>Chưa nhập Điện thoại":"Chưa nhập Điện thoại"),""===a("#modal-order #Email").val()&&(e+=""!==e?"<br/>Chưa nhập Email":"Chưa nhập Email"),""===e){var o=a("#modal-order-form #Quantity").val(),n={FullName:a("#modal-order-form #FullName").val(),Email:a("#modal-order-form #Email").val(),PhoneNumber:a("#modal-order-form #PhoneNumber").val(),OrderDetail:"Mặt nạ sủi bọt thải độc tố SU:M 37 - Số lượng: "+o+" hộp",TotalAmount:49e4*parseInt(o)};a.ajax({type:"POST",url:"/api/comdy/"+a("#token").val()+"/order",data:JSON.stringify(n),dataType:"json",contentType:"application/json",success:function(e){if(e.success){new PNotify({text:"Đặt mua thành công.",type:"success",buttons:{sticker:!1,closer:!1}}),a("#modal-order-form #FullName").val(""),a("#modal-order-form #PhoneNumber").val(""),a("#modal-order-form #Email").val("");var o=a.magnificPopup.instance;o.close()}else new PNotify({text:e.message,type:"error",buttons:{sticker:!1,closer:!1}})}})}else new PNotify({text:e,type:"error",buttons:{sticker:!1,closer:!1}})}})(window.comdy=window.comdy||{},jQuery),$(function(){comdy.app.init({})});